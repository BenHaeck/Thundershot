[gd_scene load_steps=6 format=3 uid="uid://bl0wdhhr5yhnj"]

[ext_resource type="Script" path="res://Scripts/CamScript.gd" id="1_u8mad"]

[sub_resource type="Shader" id="Shader_rynl3"]
code = "shader_type canvas_item;

uniform vec4 world_tint: source_color = vec4(1.0, 1.0, 1.0, 1.0);
uniform float vin_amount = 1.0;

uniform float color_eat = 0.1;

uniform sampler2D screen_texture: hint_screen_texture, filter_nearest;

void vertex() {
	// Called for every vertex the material is visible on.
}

void fragment() {
	vec3 color = texture(screen_texture, SCREEN_UV).rgb;

	color += (color * color);
	color *= 0.5;

	vec3 vin = vec3(SCREEN_UV.xy - 0.5, 0);
	vin = vin * vin * 4.0;
	vin.xy *= vin.xy;
	vin.xy = 1.0 - vin.xy * vin_amount * (1.0 - color.r * color.g * color.b);
	vin.z = vin.x * vin.y;

	//vin.z = vin.z * vin_amount;
	//vin.z = 1.0 - vin.z;

	color *= vin.z;


	color *= world_tint.rgb * world_tint.a * 2.0;

	COLOR.rgb = color;
	// Called for every pixel the material is visible on.
}

//void light() {
	// Called for every pixel for every light affecting the CanvasItem.
	// Uncomment to replace the default light processing function with this one.
//}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_tbee7"]
shader = SubResource("Shader_rynl3")
shader_parameter/world_tint = Color(0.923823, 1, 0.908557, 1)
shader_parameter/vin_amount = 1.0
shader_parameter/color_eat = 0.1

[sub_resource type="Gradient" id="Gradient_wv7uh"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.820313, 0.820313, 0.820313, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_d3ykg"]
gradient = SubResource("Gradient_wv7uh")
width = 16
height = 16
fill_from = Vector2(0, 1)
fill_to = Vector2(0, 0)

[node name="Camera2D" type="Camera2D"]
position = Vector2(0, -4)
script = ExtResource("1_u8mad")
cam_speed = 4.5

[node name="Sprite2D" type="Sprite2D" parent="."]
visible = false
z_index = 100
material = SubResource("ShaderMaterial_tbee7")
position = Vector2(-4, 4)
scale = Vector2(17, 13.5)
texture = SubResource("GradientTexture2D_d3ykg")
